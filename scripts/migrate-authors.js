import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

/**
 * –°–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–æ–≤ –∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
 * –°–æ—Ö—Ä–∞–Ω—è–µ—Ç SEO, URL —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ E-E-A-T
 */

async function migrateAuthorsAndExperts() {
  console.log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é...\n');

  try {
    // ============================================
    // 1. –ú–ò–ì–†–ê–¶–ò–Ø –ê–í–¢–û–†–û–í
    // ============================================
    console.log('üìù –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤—Ç–æ—Ä–æ–≤...');
    
    // –°–æ–∑–¥–∞–µ–º –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ "–†–µ–¥–∞–∫—Ü–∏—è"
    const editorialTeam = await prisma.author.upsert({
      where: { slug: 'redaktsiya-finoglyad' },
      update: {},
      create: {
        name: '–†–µ–¥–∞–∫—Ü—ñ—è Finoglyad',
        nameUk: '–†–µ–¥–∞–∫—Ü—ñ—è Finoglyad',
        slug: 'redaktsiya-finoglyad',
        avatar: '/images/team/editorial-team.jpg', // –ò—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–æ—Ç–∏–ø –∏–ª–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–µ —Ñ–æ—Ç–æ
        bio: '–ö–æ–º–∞–Ω–¥–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç—ñ–≤ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫—ñ–≤ Finoglyad –∑ –±–∞–≥–∞—Ç–æ—Ä—ñ—á–Ω–∏–º –¥–æ—Å–≤—ñ–¥–æ–º —É —Å—Ñ–µ—Ä—ñ –º—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏—Ö –ø–æ—Å–ª—É–≥.',
        bioUk: '–ö–æ–º–∞–Ω–¥–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç—ñ–≤ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫—ñ–≤ Finoglyad –∑ –±–∞–≥–∞—Ç–æ—Ä—ñ—á–Ω–∏–º –¥–æ—Å–≤—ñ–¥–æ–º —É —Å—Ñ–µ—Ä—ñ –º—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏—Ö –ø–æ—Å–ª—É–≥.',
        position: '–†–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞',
        positionUk: '–†–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞',
        experience: '–ö–æ–ª–µ–∫—Ç–∏–≤–Ω–∏–π –¥–æ—Å–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏ –ø–æ–Ω–∞–¥ 50 —Ä–æ–∫—ñ–≤ —É —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ–π –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç–∏—Ü—ñ',
        experienceUk: '–ö–æ–ª–µ–∫—Ç–∏–≤–Ω–∏–π –¥–æ—Å–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏ –ø–æ–Ω–∞–¥ 50 —Ä–æ–∫—ñ–≤ —É —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ–π –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç–∏—Ü—ñ',
        expertise: ['–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –Ω–æ–≤–∏–Ω–∏', '–ú—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø—Ä–æ–¥—É–∫—Ç–∏', '–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –≥—Ä–∞–º–æ—Ç–Ω—ñ—Å—Ç—å'],
        expertiseUk: ['–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –Ω–æ–≤–∏–Ω–∏', '–ú—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø—Ä–æ–¥—É–∫—Ç–∏', '–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –≥—Ä–∞–º–æ—Ç–Ω—ñ—Å—Ç—å'],
        achievements: ['–ü–æ–Ω–∞–¥ 1000 –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤', '–î–æ–≤—ñ—Ä–∞ 100,000+ —á–∏—Ç–∞—á—ñ–≤'],
        achievementsUk: ['–ü–æ–Ω–∞–¥ 1000 –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤', '–î–æ–≤—ñ—Ä–∞ 100,000+ —á–∏—Ç–∞—á—ñ–≤'],
        color: '#2D3561',
        email: 'info@finoglyad.com.ua'
      }
    });

    console.log(`‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞: ${editorialTeam.name}`);

    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö —Å—Ç–∞—Ä—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤
    const oldAuthors = await prisma.author.findMany({
      where: {
        slug: {
          notIn: ['redaktsiya-finoglyad']
        }
      },
      include: {
        articles: true
      }
    });

    // –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞–µ–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏ –Ω–∞ —Ä–µ–¥–∞–∫—Ü–∏—é
    for (const author of oldAuthors) {
      if (author.articles.length > 0) {
        await prisma.news.updateMany({
          where: { authorId: author.id },
          data: { authorId: editorialTeam.id }
        });
        
        console.log(`  ‚Ü≥ –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–æ ${author.articles.length} —Å—Ç–∞—Ç–µ–π –æ—Ç "${author.name}"`);
      }
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ–¥–∞–∫—Ü–∏–∏
    const totalArticles = await prisma.news.count({
      where: { authorId: editorialTeam.id }
    });
    
    const totalViews = await prisma.news.aggregate({
      where: { authorId: editorialTeam.id },
      _sum: { views: true }
    });

    await prisma.author.update({
      where: { id: editorialTeam.id },
      data: {
        totalPosts: totalArticles,
        totalViews: totalViews._sum.views || 0
      }
    });

    console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ${totalArticles} —Å—Ç–∞—Ç–µ–π, ${totalViews._sum.views || 0} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤\n`);

    // ============================================
    // 2. –ú–ò–ì–†–ê–¶–ò–Ø –≠–ö–°–ü–ï–†–¢–û–í
    // ============================================
    console.log('üë®‚Äçüíº –û–±–Ω–æ–≤–ª—è–µ–º —ç–∫—Å–ø–µ—Ä—Ç–æ–≤...');

    // –°–æ–∑–¥–∞–µ–º –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
    const experts = [
      {
        slug: 'finansovyy-konsultant',
        name: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç Finoglyad',
        nameUk: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç Finoglyad',
        position: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
        positionUk: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
        bio: '–ù–∞—à –µ–∫—Å–ø–µ—Ä—Ç –∑ –º—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è –¥–æ–ø–æ–º–æ–∂–µ –≤–∏–±—Ä–∞—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ –∫—Ä–µ–¥–∏—Ç–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ —Ç–∞ —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ —É–º–æ–≤–∞—Ö –ú–§–û.',
        bioUk: '–ù–∞—à –µ–∫—Å–ø–µ—Ä—Ç –∑ –º—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è –¥–æ–ø–æ–º–æ–∂–µ –≤–∏–±—Ä–∞—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ –∫—Ä–µ–¥–∏—Ç–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ —Ç–∞ —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ —É–º–æ–≤–∞—Ö –ú–§–û.',
        experience: '–ü–æ–Ω–∞–¥ 10 —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É –≤ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–º—É –∫–æ–Ω—Å—É–ª—å—Ç—É–≤–∞–Ω–Ω—ñ',
        experienceUk: '–ü–æ–Ω–∞–¥ 10 —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É –≤ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–º—É –∫–æ–Ω—Å—É–ª—å—Ç—É–≤–∞–Ω–Ω—ñ',
        expertise: ['–ú—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–§—ñ–Ω–∞–Ω—Å–æ–≤–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è', '–ö—Ä–µ–¥–∏—Ç–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è'],
        expertiseUk: ['–ú—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–§—ñ–Ω–∞–Ω—Å–æ–≤–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è', '–ö—Ä–µ–¥–∏—Ç–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è'],
        achievements: ['–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è', '–¢–∏—Å—è—á—ñ —É—Å–ø—ñ—à–Ω–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π'],
        achievementsUk: ['–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è', '–¢–∏—Å—è—á—ñ —É—Å–ø—ñ—à–Ω–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π'],
        color: '#FF6B9D',
        isActive: true
      },
      {
        slug: 'kredytnyy-analityk',
        name: '–ö—Ä–µ–¥–∏—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫ Finoglyad',
        nameUk: '–ö—Ä–µ–¥–∏—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫ Finoglyad',
        position: '–ö—Ä–µ–¥–∏—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫',
        positionUk: '–ö—Ä–µ–¥–∏—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫',
        bio: '–°–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç –∑ –∞–Ω–∞–ª—ñ–∑—É –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —Ç–∞ –æ–Ω–ª–∞–π–Ω-–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è. –î–æ–ø–æ–º–∞–≥–∞—î —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ —É–º–æ–≤–∞—Ö —Ç–∞ –≤–∏–±—Ä–∞—Ç–∏ –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó.',
        bioUk: '–°–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç –∑ –∞–Ω–∞–ª—ñ–∑—É –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —Ç–∞ –æ–Ω–ª–∞–π–Ω-–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è. –î–æ–ø–æ–º–∞–≥–∞—î —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ —É–º–æ–≤–∞—Ö —Ç–∞ –≤–∏–±—Ä–∞—Ç–∏ –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó.',
        experience: '–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –≤ –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ–π —Å—Ñ–µ—Ä—ñ —Ç–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–º—É –∞–Ω–∞–ª—ñ–∑—ñ',
        experienceUk: '–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –≤ –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ–π —Å—Ñ–µ—Ä—ñ —Ç–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–º—É –∞–Ω–∞–ª—ñ–∑—ñ',
        expertise: ['–û–Ω–ª–∞–π–Ω-–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–ê–Ω–∞–ª—ñ–∑ –ú–§–û', '–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –≥—Ä–∞–º–æ—Ç–Ω—ñ—Å—Ç—å'],
        expertiseUk: ['–û–Ω–ª–∞–π–Ω-–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–ê–Ω–∞–ª—ñ–∑ –ú–§–û', '–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –≥—Ä–∞–º–æ—Ç–Ω—ñ—Å—Ç—å'],
        achievements: ['–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞', '–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –æ–≥–ª—è–¥—ñ–≤'],
        achievementsUk: ['–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞', '–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –æ–≥–ª—è–¥—ñ–≤'],
        color: '#4ECDC4',
        isActive: true
      }
    ];

    const createdExperts = [];
    for (const expertData of experts) {
      const expert = await prisma.expert.upsert({
        where: { slug: expertData.slug },
        update: expertData,
        create: expertData
      });
      createdExperts.push(expert);
      console.log(`‚úÖ –°–æ–∑–¥–∞–Ω —ç–∫—Å–ø–µ—Ä—Ç: ${expert.name}`);
    }

    // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ä—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
    const oldExperts = await prisma.expert.findMany({
      where: {
        slug: {
          notIn: experts.map(e => e.slug)
        }
      },
      include: {
        questionAnswers: true,
        reviewAnswers: true
      }
    });

    // –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞–µ–º –æ—Ç–≤–µ—Ç—ã
    for (const oldExpert of oldExperts) {
      const newExpert = createdExperts[0]; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤–æ–≥–æ –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞
      
      if (oldExpert.questionAnswers.length > 0) {
        await prisma.questionAnswer.updateMany({
          where: { expertId: oldExpert.id },
          data: { expertId: newExpert.id }
        });
        console.log(`  ‚Ü≥ –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–æ ${oldExpert.questionAnswers.length} –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã`);
      }
      
      if (oldExpert.reviewAnswers.length > 0) {
        await prisma.reviewAnswer.updateMany({
          where: { expertId: oldExpert.id },
          data: { expertId: newExpert.id }
        });
        console.log(`  ‚Ü≥ –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–æ ${oldExpert.reviewAnswers.length} –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã`);
      }
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–æ–≤—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
    for (const expert of createdExperts) {
      const totalAnswers = await prisma.questionAnswer.count({
        where: { expertId: expert.id }
      }) + await prisma.reviewAnswer.count({
        where: { expertId: expert.id }
      });

      await prisma.expert.update({
        where: { id: expert.id },
        data: { totalAnswers }
      });
    }

    console.log('\n‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
    console.log('\nüìä –ò—Ç–æ–≥–∏:');
    console.log(`   - –°–æ–∑–¥–∞–Ω –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã–π –∞–≤—Ç–æ—Ä`);
    console.log(`   - –°–æ–∑–¥–∞–Ω–æ ${experts.length} –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤`);
    console.log(`   - –í—Å–µ —Å—Ç–∞—Ç—å–∏ –∏ –æ—Ç–≤–µ—Ç—ã –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω—ã`);
    
    console.log('\n‚ö†Ô∏è  –í–ê–ñ–ù–û: –°—Ç–∞—Ä—ã–µ –∞–≤—Ç–æ—Ä—ã/—ç–∫—Å–ø–µ—Ä—Ç—ã –ù–ï –£–î–ê–õ–ï–ù–´');
    console.log('   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —É–¥–∞–ª–∏—Ç–µ –∏—Ö –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ');
    
    // ============================================
    // 3. –û–ë–ï–ó–õ–ò–ß–ò–í–ê–ù–ò–ï –°–¢–ê–†–´–• –ê–í–¢–û–†–û–í (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è!)
    // ============================================
    console.log('\nüîÑ –û–±–µ–∑–ª–∏—á–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º slug)...');
    
    for (const author of oldAuthors) {
      await prisma.author.update({
        where: { id: author.id },
        data: {
          name: '–†–µ–¥–∞–∫—Ü—ñ—è Finoglyad',
          nameUk: '–†–µ–¥–∞–∫—Ü—ñ—è Finoglyad',
          bio: '–ö–æ–º–∞–Ω–¥–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ Finoglyad',
          bioUk: '–ö–æ–º–∞–Ω–¥–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ Finoglyad',
          position: '–†–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞',
          positionUk: '–†–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞',
          experience: '–ö–æ–ª–µ–∫—Ç–∏–≤–Ω–∏–π –¥–æ—Å–≤—ñ–¥ —É —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ–π –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç–∏—Ü—ñ',
          experienceUk: '–ö–æ–ª–µ–∫—Ç–∏–≤–Ω–∏–π –¥–æ—Å–≤—ñ–¥ —É —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ–π –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç–∏—Ü—ñ',
          // –£–±–∏—Ä–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–∏—Ñ—Ä—ã
          followers: 0,
          totalViews: author.totalViews, // –æ—Å—Ç–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
          totalPosts: author.totalPosts,
          // –û–±–æ–±—â–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
          achievements: ['–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç—ñ–≤'],
          achievementsUk: ['–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –∂—É—Ä–Ω–∞–ª—ñ—Å—Ç—ñ–≤'],
          expertise: ['–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –Ω–æ–≤–∏–Ω–∏', '–ú–§–û', '–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø—Ä–æ–¥—É–∫—Ç–∏'],
          expertiseUk: ['–§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –Ω–æ–≤–∏–Ω–∏', '–ú–§–û', '–ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø—Ä–æ–¥—É–∫—Ç–∏'],
          // –£–±–∏—Ä–∞–µ–º –ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
          email: 'info@finoglyad.com.ua',
          telegram: null,
          linkedin: null,
          twitter: null,
          // Slug –û–°–¢–ê–ï–¢–°–Ø –ø—Ä–µ–∂–Ω–∏–º!
        }
      });
      console.log(`  ‚úÖ –û–±–µ–∑–ª–∏—á–µ–Ω –∞–≤—Ç–æ—Ä: ${author.slug} (URL —Å–æ—Ö—Ä–∞–Ω–µ–Ω)`);
    }

    // –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
    console.log('\nüîÑ –û–±–µ–∑–ª–∏—á–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º slug)...');
    
    for (const expert of oldExperts) {
      await prisma.expert.update({
        where: { id: expert.id },
        data: {
          name: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –µ–∫—Å–ø–µ—Ä—Ç Finoglyad',
          nameUk: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –µ–∫—Å–ø–µ—Ä—Ç Finoglyad',
          bio: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∑ –¥–æ—Å–≤—ñ–¥–æ–º —É —Å—Ñ–µ—Ä—ñ –º—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è',
          bioUk: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∑ –¥–æ—Å–≤—ñ–¥–æ–º —É —Å—Ñ–µ—Ä—ñ –º—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è',
          position: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
          positionUk: '–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç',
          experience: '–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –≤ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–º—É –∫–æ–Ω—Å—É–ª—å—Ç—É–≤–∞–Ω–Ω—ñ',
          experienceUk: '–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –≤ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–º—É –∫–æ–Ω—Å—É–ª—å—Ç—É–≤–∞–Ω–Ω—ñ',
          achievements: ['–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è'],
          achievementsUk: ['–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è'],
          expertise: ['–ú—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–§—ñ–Ω–∞–Ω—Å–æ–≤–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è'],
          expertiseUk: ['–ú—ñ–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è', '–§—ñ–Ω–∞–Ω—Å–æ–≤–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è'],
          email: 'experts@finoglyad.com.ua',
          telegram: null,
          linkedin: null,
          twitter: null,
          // Slug –û–°–¢–ê–ï–¢–°–Ø –ø—Ä–µ–∂–Ω–∏–º!
        }
      });
      console.log(`  ‚úÖ –û–±–µ–∑–ª–∏—á–µ–Ω —ç–∫—Å–ø–µ—Ä—Ç: ${expert.slug} (URL —Å–æ—Ö—Ä–∞–Ω–µ–Ω)`);
    }
    
    console.log('\n‚úÖ –í—Å–µ URL —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! –†–µ–¥–∏—Ä–µ–∫—Ç—ã –ù–ï –Ω—É–∂–Ω—ã!');

  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

// –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏
migrateAuthorsAndExperts()
  .then(() => {
    console.log('\n‚ú® –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∞–¥–º–∏–Ω–∫–µ');
    process.exit(0);
  })
  .catch((error) => {
    console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:', error);
    process.exit(1);
  });